<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서관 책 검색</title>
</head>
<body>
    <h1>도서관 책 검색</h1>

    <label for="search">검색:</label>
    <input type="text" id="search" placeholder="책 제목 또는 저자 검색..." oninput="filterBooks()">

    <label for="category">카테고리 선택:</label>
    <select id="category" onchange="filterBooks()">
        <option value="">전체</option>
        <option value="소설">소설</option>
        <option value="과학">과학</option>
        <option value="수학">수학</option>
    </select>

    <h2>책 목록</h2>
    <ul id="book-list"></ul>

    <script>
        const books = [
            { title: "책 제목 1", author: "저자 1", category: "소설" },
            { title: "책 제목 2", author: "저자 2", category: "과학" },
            { title: "책 제목 3", author: "저자 3", category: "수학" },
            { title: "책 제목 4", author: "저자 4", category: "소설" },
            { title: "책 제목 5", author: "저자 5", category: "과학" }
        ];

        const categorySelect = document.getElementById("category");
        const searchInput = document.getElementById("search");

        function displayBooks(filteredBooks) {
            const bookList = document.getElementById("book-list");
            bookList.innerHTML = "";
            filteredBooks.forEach((book) => {
                const li = document.createElement("li");
                li.textContent = `${book.title} - ${book.author} (${book.category})`;
                li.style.cursor = "pointer";
                li.onclick = function () {
                    window.location.href = `book.html?title=${encodeURIComponent(book.title)}&author=${encodeURIComponent(book.author)}&category=${encodeURIComponent(book.category)}`;
                };
                bookList.appendChild(li);
            });
        }

        function filterBooks() {
            const searchQuery = searchInput.value.toLowerCase();
            const selectedCategory = categorySelect.value;

            let filteredBooks = books.filter((book) => {
                const matchesCategory = selectedCategory ? book.category === selectedCategory : true;
                const matchesSearch =
                    book.title.toLowerCase().includes(searchQuery) ||
                    book.author.toLowerCase().includes(searchQuery);
                return matchesCategory && matchesSearch;
            });

            displayBooks(filteredBooks);
        }

        displayBooks(books);
    </script>

    <button onclick="window.location.href='lib.html'">홈으로 돌아가기</button>
</body>
</html>
